<!DOCTYPE html>
<html>
<head>
  <title>AI Chess PGN Analyzer</title>
</head>
<body style="margin: 0; padding: 0; height: 100vh; width: 100vw; overflow: hidden; display: flex; flex-direction: column; font-family: sans-serif;">
  
  <header style="height: 50px; background: #333; color: white; display: flex; align-items: center; padding: 0 20px; flex-shrink: 0;">
    <h1>AI Chess PGN Analyzer</h1>
  </header>

  <main style="flex-grow: 1; display: flex; overflow: hidden;">

    <div id="board-area" style="flex: 6; background: #eee; display: flex; justify-content: center; align-items: center; padding: 20px;">
      <div id="board" style="width: 100%; max-width: 600px; aspect-ratio: 1/1; background: #ccc; border: 2px solid #999;"></div>
    </div>


    
    <div id="analysis-area" style="flex: 4; display: flex; flex-direction: column; padding: 20px; border-left: 1px solid #ccc; background: white;">

		  <div id="results" style="display: flex; flex-direction: column; flex-grow: 1;">
        <div id="ai-review" style="height: 30%; min-height: 100px; padding: 15px; background: #f9f9f9; border-bottom: 2px solid #eee; overflow-y: auto;">
          <p style="color: #888;">AI analysis for each move will appear here...</p>
        </div>
        
        <div id="pgn" style="flex-grow: 1; overflow-y: auto; border-top: 1px solid #eee; padding-top: 10px;">
          <p style="color: #888;">Moves will appear here...</p>
        </div>
      </div>
      
      <div id="controls">
        <textarea id="pgn-input" placeholder="Paste PGN here..." style="width: 100%; height: 15%; padding: 10px; resize: none; flex-shrink: 0;"></textarea>

        <div style="display: flex; align-items: center; gap: 15px;">
          <div style="margin-bottom: 15px; flex-grow: 1;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">
              Depth: <span id="depth-value" style="color: #4CAF50;">12</span>
            </label>
  
            <input type="range" id="depth-slider" min="5" max="20" value="12" 
              style="width: 100%; cursor: pointer; accent-color: #4CAF50;">
         
            <div style="display: flex; justify-content: space-between; font-size: 10px; color: #888;">
              <span>5 (Fast)</span>
              <span>20 (Deep)</span>
            </div>
          </div>
      
          <button id="analyze-btn" style="width: 20%; margin: 15px 0; padding: 12px; cursor: pointer; background: #4CAF50; color: white; border: none; font-weight: bold; flex-shrink: 0;">
            ANALYZE GAME
          </button>
        </div>
	    </div>
    </div>
    
  </main>

  
  <footer style="height: 30px; background: #444; color: white; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
    <p style="text-align: center;">&copy; 2025 cHamster24. All rights reserved. | <a href="https://github.com/chamster24/chess-pgn-analysis/">Github</a></p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
  <script>
    const game = new Chess();
    const engine = new Worker('https://nmrugg.github.io/stockfish.js/stockfish.js');
    
    const depth_slider = document.getElementById('depth-slider');
    const depthLabel = document.getElementById('depth-value');
	  const analyze_btn = document.getElementById('analyze-btn');

    function analizegame() {
      
    }
    
    // Update the number on the screen every time the user moves the slider
    depth_slider.oninput = function() {
      depthLabel.innerHTML = this.value;
    };
    // Check if stockfish is up and running
    engine.postMessage('uci');
    engine.onmessage = function(event) {
      if (event.data === "uciok") {
        engineReady = true;
        console.log("Engine is ready to go!");
      }
    };
    // Check for valid PGN on button click
    analyze_btn.addEventListener('click', funcution() {
      const isValid = new Chess().load_pgn(document.getElementById('pgn-input').value);
      if (!isValid) {
        alert("Invalid PGN!")
      } else {
        if (!engineReady === true) {
          alert("Error with stockfish!")
        } else {
          analizegame()
        }
      }
    });
  </script>
</body>
</html>
